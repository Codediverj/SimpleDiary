{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jee/Desktop/j_project/simpleDiary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jee/Desktop/j_project/simpleDiary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jee/Desktop/j_project/simpleDiary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/jee/Desktop/j_project/simpleDiary/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/jee/Desktop/j_project/simpleDiary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useRef,useReducer,useMemo}from\"react\";import'./App.css';import DiaryEditor from'./DiaryEditor';import DiaryList from'./DiaryList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case\"INIT\":{return action.data;}case\"CREATE\":{var created_date=new Date().getTime();var newItem=_objectSpread(_objectSpread({},action.data),{},{created_date:created_date});return[newItem].concat(_toConsumableArray(state));}case\"REMOVE\":{return state.filter(function(it){return it.id!==action.targetId;});}case\"EDIT\":{return state.map(function(it){return it.id===action.targetId?_objectSpread(_objectSpread({},it),{},{content:action.newContent}):it;});}default:return state;}};export var DiaryStateContext=/*#__PURE__*/React.createContext();function App(){var _useReducer=useReducer(reducer,[]),_useReducer2=_slicedToArray(_useReducer,2),data=_useReducer2[0],dispatch=_useReducer2[1];var dataId=useRef(0);var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,initData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://jsonplaceholder.typicode.com/comments').then(function(res){return res.json();});case 2:res=_context.sent;initData=res.slice(0,20).map(function(it){return{author:it.email,content:it.body,emotion:Math.floor(Math.random()*5)+1,created_date:new Date().getTime(),id:dataId.current++};});dispatch({type:\"INIT\",data:initData});case 5:case\"end\":return _context.stop();}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();useEffect(function(){getData();},[]);var onCreate=useCallback(function(author,content,emotion){dispatch({type:\"CREATE\",data:{author:author,content:content,emotion:emotion,id:dataId.current}});dataId.current+=1;},[]);var onDelete=useCallback(function(targetId){dispatch({type:\"REMOVE\",targetId:targetId});},[]);var onEdit=useCallback(function(targetId,newContent){dispatch({type:\"EDIT\",targetId:targetId,newContent:newContent});},[]);var getDiaryAnalysis=useMemo(function(){var goodCount=data.filter(function(it){return it.emotion>=3;}).length;var badCount=data.length-goodCount;var goodRatio=goodCount/data.length*100;return{goodCount:goodCount,badCount:badCount,goodRatio:goodRatio};},[data.length]);var goodCount=getDiaryAnalysis.goodCount,badCount=getDiaryAnalysis.badCount,goodRatio=getDiaryAnalysis.goodRatio;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(DiaryEditor,{onCreate:onCreate}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Total : \",data.length]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Good Mood day : \",goodCount]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Bad Mood day : \",badCount]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Good day (%) : \",goodRatio,\"%\"]}),/*#__PURE__*/_jsx(DiaryList,{onEdit:onEdit,onDelete:onDelete,diaryList:data})]});}export default App;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useReducer","useMemo","DiaryEditor","DiaryList","reducer","state","action","type","data","created_date","Date","getTime","newItem","filter","it","id","targetId","map","content","newContent","DiaryStateContext","createContext","App","dispatch","dataId","getData","fetch","then","res","json","initData","slice","author","email","body","emotion","Math","floor","random","current","onCreate","onDelete","onEdit","getDiaryAnalysis","goodCount","length","badCount","goodRatio"],"sources":["/Users/jee/Desktop/j_project/simpleDiary/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useReducer, useMemo } from \"react\";\nimport './App.css';\nimport DiaryEditor from './DiaryEditor';\nimport DiaryList from './DiaryList';\n\nconst reducer = (state, action) => {\n  switch(action.type){\n    case \"INIT\": {\n      return action.data;\n    }\n    case \"CREATE\": {\n      const created_date = new Date().getTime();\n      const newItem = {\n        ...action.data,\n        created_date\n      }\n      return [newItem, ...state];\n    }\n    case \"REMOVE\": {\n      return state.filter((it)=>it.id !== action.targetId);\n    }\n    case \"EDIT\": {\n      return state.map((it)=>it.id === action.targetId ? \n      {...it, content:action.newContent} : it);\n    }\n    default: \n    return state;\n  }\n};\n\nexport const DiaryStateContext = React.createContext();\n\nfunction App() {\n\n  const [data, dispatch] = useReducer(reducer, []);\n  const dataId = useRef(0);\n  const getData = async()=> {\n    const res = await fetch('https://jsonplaceholder.typicode.com/comments').then((res)=>res.json());\n    \n    const initData = res.slice(0,20).map((it)=>{\n      return{\n        author : it.email,\n        content : it.body,\n        emotion : Math.floor(Math.random()*5)+1, \n        created_date : new Date().getTime(),\n        id : dataId.current++\n      }\n    });\n    dispatch({type:\"INIT\", data:initData})\n  };\n\n  useEffect(()=>{\n    getData();\n  },[]);\n\n  const onCreate = useCallback((author, content, emotion) => {\n    dispatch({type: \"CREATE\", data:{author, content, emotion, id : dataId.current}})\n    dataId.current += 1;\n  }, []);\n\n  const onDelete = useCallback((targetId) => {\n    dispatch({type: \"REMOVE\", targetId})\n  }, []);\n\n  const onEdit = useCallback((targetId, newContent) => {\n    dispatch({type: \"EDIT\", targetId, newContent})\n  }, []);\n\n  const getDiaryAnalysis = useMemo(() => {\n    const goodCount = data.filter((it)=>it.emotion >= 3 ).length;\n    const badCount = data.length - goodCount;\n    const goodRatio = (goodCount / data.length) * 100;\n    return {goodCount, badCount, goodRatio};\n  }, [data.length]);\n\n  const {goodCount, badCount, goodRatio} = getDiaryAnalysis;\n\n  return (\n    <div className=\"App\">\n      <DiaryEditor onCreate={onCreate}/>\n      <div>Total : {data.length}</div>\n      <div>Good Mood day : {goodCount}</div>\n      <div>Bad Mood day : {badCount}</div>\n      <div>Good day (%) : {goodRatio}%</div>\n      <DiaryList onEdit={onEdit} onDelete={onDelete} diaryList={data}/>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}